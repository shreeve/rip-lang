<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rip UI Demo</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Demo Styles -->
    <link rel="stylesheet" href="/css/demo.css">
</head>
<body>

    <!-- App Shell -->
    <div id="app"></div>

    <!-- Boot the framework -->
    <script type="module">
        // Import the Rip compiler and UI framework from /rip-ui/ middleware
        import { compileToJS } from '/rip-ui/compiler.js';
        import { createApp } from '/rip-ui/ui.js';

        // Boot
        async function boot() {
            const app = createApp({
                target: '#app',
                compile: compileToJS,
                state: {
                    appName: 'Rip UI Demo',
                    version: '0.1.0',
                    theme: 'light'
                },
                transition: { duration: 150 },
                onNavigate: ({ path }) => console.log(`[Router] ${path}`),
                onError: (err) => console.error('[App]', err)
            });

            // Load ALL pages in one request (auto-discovered, brotli compressed)
            await app.loadBundle('/rip-ui/manifest.json');

            // Start routing and rendering
            app.start();

            // Connect to dev server for hot reload
            app.watch('/rip-ui/watch');

            // Expose for console debugging
            window.app = app;
            console.log(`Rip UI Demo booted â€” ${app.fs.size} files in VFS`);
            console.log('Routes:', app.router.routes.map(r => r.pattern));
            console.log('Try: app.set("theme", "dark") or app.go("/counter")');
        }

        boot().catch(console.error);
    </script>

</body>
</html>
