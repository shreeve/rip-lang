# Test: Clean JavaScript Output (no unnecessary semicolons)
# Tests that block statements don't have trailing semicolons

# ============================================================================
# Function Declarations (NO semicolon after })
# ============================================================================

code "function declaration", "def foo()\n  42", "function foo() {\n  return 42;\n}"
code "async function", "def bar()\n  fetch!()", "async function bar() {\n  return await fetch();\n}"

# ============================================================================
# Class Declarations (NO semicolon after })
# ============================================================================

code "class declaration", "class Foo", "class Foo {\n}"
code "class with method", "class Foo\n  bar: -> 42", "class Foo {\n  bar() {\n    return 42;\n  }\n}"

# ============================================================================
# Control Flow (NO semicolon after })
# ============================================================================

code "if block", "if x\n  y", "if (x) {\n  y;\n}"
code "if else", "if x\n  y\nelse\n  z", "if (x) {\n  y;\n} else {\n  z;\n}"
code "unless block", "unless x\n  y", "if (!x) {\n  y;\n}"

# ============================================================================
# Loops (NO semicolon after })
# ============================================================================

code "for loop", "for x in arr\n  x", "for (const x of arr) {\n  x;\n}"
code "while loop", "while x\n  y", "while (x) {\n  y;\n}"

# ============================================================================
# Switch (NO semicolon after })
# ============================================================================

code "switch statement", "switch x\n  when 1 then 'one'\n  else 'other'", "switch (x) {\n  case 1:\n    'one';\n    break;\n  default:\n    'other';\n    break;\n}"

# ============================================================================
# Try-Catch (NO semicolon after })
# ============================================================================

code "try catch", "try\n  x\ncatch e\n  y", "try {\n  x;\n} catch (e) {\n  y;\n}"

# ============================================================================
# Expressions KEEP Semicolons
# ============================================================================

code "function expression", "f = -> 42", "let f;\n\nf = function() {\n  return 42;\n};"
code "class expression", "C = class Foo", "let C;\n\nC = class Foo {\n};"
